"use strict";var e=require("autoprefixer"),s=require("browserslist"),t=require("cssdb"),r=require("postcss-attribute-case-insensitive"),o=require("css-blank-pseudo"),i=require("postcss-color-functional-notation"),n=require("postcss-color-hex-alpha"),c=require("postcss-color-rebeccapurple"),u=require("postcss-custom-media"),a=require("postcss-custom-properties"),p=require("postcss-custom-selectors"),l=require("postcss-dir-pseudo-class"),f=require("postcss-double-position-gradients"),d=require("postcss-env-function"),m=require("postcss-focus-visible"),b=require("postcss-focus-within"),g=require("postcss-font-variant"),y=require("postcss-gap-properties"),$=require("css-has-pseudo"),j=require("postcss-image-set-function"),q=require("postcss-initial"),v=require("postcss-lab-function"),w=require("postcss-logical"),O=require("postcss-media-minmax"),h=require("postcss-nesting"),k=require("postcss-overflow-shorthand"),x=require("postcss-page-break"),S=require("postcss-place"),P=require("css-prefers-color-scheme"),M=require("postcss-pseudo-class-any-link"),B=require("postcss-replace-overflow-wrap"),F=require("postcss-selector-not"),T=require("caniuse-lite"),U=require("fs"),A=require("path");function V(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function E(e){if(e&&e.__esModule)return e;var s=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),s.default=e,Object.freeze(s)}var I=V(e),N=V(s),C=V(t),D=V(r),J=V(o),R=V(i),_=V(n),z=V(c),L=V(u),G=V(a),H=V(p),K=V(l),Q=V(f),W=V(d),X=V(m),Y=V(b),Z=V(g),ee=V(y),se=V($),te=V(j),re=V(q),oe=V(v),ie=V(w),ne=V(O),ce=V(h),ue=V(k),ae=V(x),pe=V(S),le=V(P),fe=V(M),de=V(B),me=V(F),be=E(T),ge=V(U),ye=V(A);function $e(){return{postcssPlugin:"postcss-system-ui-font",Declaration(e){je.test(e.prop)&&(e.value.includes(ve.join(", "))||(e.value=e.value.replace(we,Oe)))}}}$e.postcss=!0;const je=/(?:^(?:-|\\002d){2})|(?:^font(?:-family)?$)/i,qe="[\\f\\n\\r\\x09\\x20]",ve=["system-ui","-apple-system","Segoe UI","Roboto","Ubuntu","Cantarell","Noto Sans","sans-serif"],we=new RegExp(`(^|,|${qe}+)(?:system-ui${qe}*)(?:,${qe}*(?:${ve.join("|")})${qe}*)?(,|$)`,"i"),Oe=`$1${ve.join(", ")}$2`;var he={"all-property":re.default,"any-link-pseudo-class":fe.default,"blank-pseudo-class":J.default,"break-properties":ae.default,"case-insensitive-attributes":D.default,"color-functional-notation":R.default,"custom-media-queries":L.default,"custom-properties":G.default,"custom-selectors":H.default,"dir-pseudo-class":K.default,"double-position-gradients":Q.default,"environment-variables":W.default,"focus-visible-pseudo-class":X.default,"focus-within-pseudo-class":Y.default,"font-variant-property":Z.default,"gap-properties":ee.default,"has-pseudo-class":se.default,"hexadecimal-alpha-notation":_.default,"image-set-function":te.default,"lab-function":oe.default,"logical-properties-and-values":ie.default,"media-query-ranges":ne.default,"nesting-rules":ce.default,"not-pseudo-class":me.default,"overflow-property":ue.default,"overflow-wrap-property":de.default,"place-properties":pe.default,"prefers-color-scheme-query":le.default,"rebeccapurple-color":z.default,"system-ui-font-family":$e};function ke(e,s){return Object.keys(e).map((t=>[].concat(e[t]).map((e=>({[s]:!0,plugin:e,id:t}))))).reduce(((e,s)=>e.concat(s)),[])}function xe(e){const s=be.features[e];if(s){const e=be.feature(s).stats;return Object.keys(e).reduce(((s,t)=>s.concat(Object.keys(e[t]).filter((s=>0!==e[t][s].indexOf("y"))).map((e=>`${t} ${e}`)))),[])}return["> 0%"]}var Se=["custom-media-queries","custom-properties","environment-variables","image-set-function","media-query-ranges","prefers-color-scheme-query","nesting-rules","custom-selectors","any-link-pseudo-class","case-insensitive-attributes","focus-visible-pseudo-class","focus-within-pseudo-class","matches-pseudo-class","not-pseudo-class","logical-properties-and-values","dir-pseudo-class","all-property","color-functional-notation","double-position-gradients","hexadecimal-alpha-notation","lab-function","rebeccapurple-color","color-mod-function","blank-pseudo-class","break-properties","font-variant-property","has-pseudo-class","gap-properties","overflow-property","overflow-wrap-property","place-properties","system-ui-font-family"];async function Pe(e,s,t,r){const o=function(e){return`:root {\n${Object.keys(e).reduce(((s,t)=>(s.push(`\t${t}: ${e[t]};`),s)),[]).join("\n")}\n}\n`}(t),i=function(e){return`${Object.keys(e).reduce(((s,t)=>(s.push(`@custom-media ${t} ${e[t]};`),s)),[]).join("\n")}\n`}(s),n=function(e){return`${Object.keys(e).reduce(((s,t)=>(s.push(`@custom-selector ${t} ${e[t]};`),s)),[]).join("\n")}\n`}(r),c=`${i}\n${n}\n${o}`;await Ue(e,c)}function Me(e,s){return`\n\t${e}: {\n${Object.keys(s).reduce(((e,t)=>(e.push(`\t\t'${Ae(t)}': '${Ae(s[t])}'`),e)),[]).join(",\n")}\n\t}`}function Be(e,s){return`export const ${e} = {\n${Object.keys(s).reduce(((e,t)=>(e.push(`\t'${Ae(t)}': '${Ae(s[t])}'`),e)),[]).join(",\n")}\n};\n`}function Fe(e,s){return Promise.all([].concat(s).map((async s=>{if(s instanceof Function)await s({customMedia:Te(e.customMedia),customProperties:Te(e.customProperties),customSelectors:Te(e.customSelectors)});else{const t=s===Object(s)?s:{to:String(s)},r=t.toJSON||Te;if("customMedia"in t||"customProperties"in t||"customSelectors"in t)t.customMedia=r(e.customMedia),t.customProperties=r(e.customProperties),t.customSelectors=r(e.customSelectors);else if("custom-media"in t||"custom-properties"in t||"custom-selectors"in t)t["custom-media"]=r(e.customMedia),t["custom-properties"]=r(e.customProperties),t["custom-selectors"]=r(e.customSelectors);else{const s=String(t.to||""),o=(t.type||ye.default.extname(t.to).slice(1)).toLowerCase(),i=r(e.customMedia),n=r(e.customProperties),c=r(e.customSelectors);"css"===o&&await Pe(s,i,n,c),"js"===o&&await async function(e,s,t,r){const o=`module.exports = {${Me("customMedia",s)},${Me("customProperties",t)},${Me("customSelectors",r)}\n};\n`;await Ue(e,o)}(s,i,n,c),"json"===o&&await async function(e,s,t,r){const o=`${JSON.stringify({"custom-media":s,"custom-properties":t,"custom-selectors":r},null,"  ")}\n`;await Ue(e,o)}(s,i,n,c),"mjs"===o&&await async function(e,s,t,r){const o=`${Be("customMedia",s)}\n${Be("customProperties",t)}\n${Be("customSelectors",r)}`;await Ue(e,o)}(s,i,n,c)}}})))}function Te(e){return Object.keys(e).reduce(((s,t)=>(s[t]=String(e[t]),s)),{})}function Ue(e,s){return new Promise(((t,r)=>{ge.default.writeFile(e,s,(e=>{e?r(e):t()}))}))}function Ae(e){return e.replace(/\\([\s\S])|(')/g,"\\$1$2").replace(/\n/g,"\\n").replace(/\r/g,"\\r")}function Ve(e,s){const t=N.default(e,{ignoreUnknownVersions:!0});return"nesting-rules"===s.id&&function(e,s){const t=xe(e);if(s.some((e=>N.default(t,{ignoreUnknownVersions:!0}).some((s=>s===e)))))return!0;return!1}("css-matches-pseudo",t)?{noIsPseudoSelector:!0}:{}}const Ee=e=>{const s=Object(Object(e).features),t=Object(Object(e).insertBefore),r=Object(Object(e).insertAfter),o=Object(e).browsers,i="stage"in Object(e)?!1===e.stage?5:parseInt(e.stage)||0:2,n=Object(e).autoprefixer,c=Ie(Object(e)),u=!1===n?()=>{}:I.default(Object.assign({overrideBrowserslist:o},n)),a=C.default.concat(ke(t,"insertBefore"),ke(r,"insertAfter")).filter((e=>e.insertBefore||e.id in he)).sort(((e,s)=>Se.indexOf(e.id)-Se.indexOf(s.id)||(e.insertBefore?-1:s.insertBefore?1:0)||(e.insertAfter?1:s.insertAfter?-1:0))).map((e=>{const s=xe(e.caniuse);return e.insertBefore||e.insertAfter?{browsers:s,plugin:e.plugin,id:`${e.insertBefore?"before":"after"}-${e.id}`,stage:6}:{browsers:s,plugin:he[e.id],id:e.id,stage:e.stage}})).filter((e=>e.id in s?s[e.id]:e.stage>=i)).map((e=>{let t,r;return t=Ve(o,e),t=!0===s[e.id]?c?Object.assign({},t,c):void 0:c?Object.assign({},t,c,s[e.id]):Object.assign({},t,s[e.id]),r=e.plugin.postcss?e.plugin(t):e.plugin,{browsers:e.browsers,plugin:r,id:e.id}})),p=N.default(o,{ignoreUnknownVersions:!0}),l=a.filter((e=>e.id in s?s[e.id]:p.some((s=>N.default(e.browsers,{ignoreUnknownVersions:!0}).some((e=>e===s)))))).map((e=>e.plugin));return l.push(u),{postcssPlugin:"postcss-preset-env",plugins:l,OnceExit:function(){Object(e).exportTo&&Fe(c.exportTo,e.exportTo)}}},Ie=e=>{if("importFrom"in e||"exportTo"in e||"preserve"in e){const s={};return"importFrom"in e&&(s.importFrom=e.importFrom),"exportTo"in e&&(s.exportTo={customMedia:{},customProperties:{},customSelectors:{}}),"preserve"in e&&(s.preserve=e.preserve),s}return!1};Ee.postcss=!0,module.exports=Ee;
//# sourceMappingURL=index.cjs.map
