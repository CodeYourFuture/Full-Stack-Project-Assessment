{"version":3,"file":"index.mjs","sources":["../src/index.js"],"sourcesContent":["import parser from 'postcss-selector-parser';\n\nconst creator = opts => {\n\tconst replaceWith = String(Object(opts).replaceWith || '[blank]');\n\tconst replacementAST = parser().astSync(replaceWith);\n\n\tconst preserve = Boolean('preserve' in Object(opts) ? opts.preserve : true);\n\n\treturn {\n\t\tpostcssPlugin: 'css-blank-pseudo',\n\t\tRule: (rule, { result }) => {\n\t\t\tif (rule.selector.indexOf(':blank') === -1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet modifiedSelector;\n\t\t\ttry {\n\t\t\t\tconst modifiedSelectorAST = parser((selectors) => {\n\t\t\t\t\tselectors.walkPseudos((selector) => {\n\t\t\t\t\t\tif (selector.value !== ':blank') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (selector.nodes && selector.nodes.length) {\n\t\t\t\t\t\t\t// `:blank` is not a function\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tselector.replaceWith(replacementAST.clone());\n\t\t\t\t\t});\n\t\t\t\t}).processSync(rule.selector);\n\n\t\t\t\tmodifiedSelector = String(modifiedSelectorAST);\n\t\t\t} catch (_) {\n\t\t\t\trule.warn(result, `Failed to parse selector : ${rule.selector}`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (typeof modifiedSelector === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (modifiedSelector === rule.selector) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst clone = rule.clone({ selector: modifiedSelector });\n\n\t\t\tif (preserve) {\n\t\t\t\trule.before(clone);\n\t\t\t} else {\n\t\t\t\trule.replaceWith(clone);\n\t\t\t}\n\t\t},\n\t};\n};\n\ncreator.postcss = true;\n\nexport default creator;\n"],"names":["creator","opts","replaceWith","String","Object","replacementAST","parser","astSync","preserve","Boolean","postcssPlugin","Rule","rule","result","selector","indexOf","modifiedSelector","modifiedSelectorAST","selectors","walkPseudos","value","nodes","length","clone","processSync","_","warn","before","postcss"],"mappings":"6CAEMA,EAAUC,UACTC,EAAcC,OAAOC,OAAOH,GAAMC,aAAe,WACjDG,EAAiBC,IAASC,QAAQL,GAElCM,EAAWC,UAAQ,aAAcL,OAAOH,KAAQA,EAAKO,gBAEpD,CACNE,cAAe,mBACfC,KAAM,CAACC,GAAQC,OAAAA,UAC2B,IAArCD,EAAKE,SAASC,QAAQ,qBAItBC,YAEGC,EAAsBX,GAAQY,IACnCA,EAAUC,aAAaL,IACC,WAAnBA,EAASM,QAITN,EAASO,OAASP,EAASO,MAAMC,QAKrCR,EAASZ,YAAYG,EAAekB,gBAEnCC,YAAYZ,EAAKE,UAEpBE,EAAmBb,OAAOc,GACzB,MAAOQ,eACRb,EAAKc,KAAKb,EAAS,8BAA6BD,EAAKE,oBAItB,IAArBE,YAIPA,IAAqBJ,EAAKE,sBAIxBS,EAAQX,EAAKW,MAAM,CAAET,SAAUE,IAEjCR,EACHI,EAAKe,OAAOJ,GAEZX,EAAKV,YAAYqB,MAMrBvB,EAAQ4B,SAAU"}