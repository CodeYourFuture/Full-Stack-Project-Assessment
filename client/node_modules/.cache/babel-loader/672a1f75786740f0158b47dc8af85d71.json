{"ast":null,"code":"import _asyncToGenerator from\"/home/mele/CodeYourFuture/Directory/htmlcssweek4/Full-Stack-Project-Assessment/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/mele/CodeYourFuture/Directory/htmlcssweek4/Full-Stack-Project-Assessment/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/mele/CodeYourFuture/Directory/htmlcssweek4/Full-Stack-Project-Assessment/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/mele/CodeYourFuture/Directory/htmlcssweek4/Full-Stack-Project-Assessment/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/mele/CodeYourFuture/Directory/htmlcssweek4/Full-Stack-Project-Assessment/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from\"react\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function VideoComponent(_ref){var elements=_ref.elements,onLike=_ref.onLike,onDislike=_ref.onDislike,onDelete=_ref.onDelete,setOrder=_ref.setOrder,sortOrder=_ref.sortOrder;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"ascendingButton\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light customBackground1 \".concat(sortOrder===\"ascending\"?\"active\":\"\"),onClick:function onClick(){return setOrder(\"ascending\");},children:\"Ascending\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light customBackground1 \".concat(sortOrder===\"descending\"?\"active\":\"\"),onClick:function onClick(){return setOrder(\"descending\");},children:\"Descending\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"videoDisplayContainer\",children:/*#__PURE__*/_jsx(VideoDisplay,{elements:elements,onLike:onLike,onDislike:onDislike,onDelete:onDelete})})})]});}function VideoDisplay(_ref2){var elements=_ref2.elements,onLike=_ref2.onLike,onDislike=_ref2.onDislike,onDelete=_ref2.onDelete;return/*#__PURE__*/_jsxs(\"div\",{class:\"videoDisplayContainer\",children:[\" \",elements.map(function(element){return/*#__PURE__*/_jsxs(\"div\",{class:\"displayGrid\",children:[/*#__PURE__*/_jsx(\"h5\",{children:element.title}),/*#__PURE__*/_jsx(\"source\",{width:\"330\",height:\"200\",src:element.url,title:element.title,border:\"none\",\"border-radius\":\"103px\",frameborder:\"0\",allowfullscreen:true,align:\"center\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"likedislikeBtn\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-light customBackground5\",onClick:function onClick(){return onLike(element.id);},children:\"Like\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Votes:\\xA0\",element.rating]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-light customBackground5\",onClick:function onClick(){return onDislike(element.id);},children:\"Dislike\"})]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-light deleteBtn\",onClick:function onClick(){return onDelete(element.id);},children:\"Delete\"})]},element.id);})]});}export default function AllVideoDisplay(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),videoData=_useState2[0],setVideoData=_useState2[1];var _useState3=useState(\"descending\"),_useState4=_slicedToArray(_useState3,2),sortOrder=_useState4[0],setSortOrder=_useState4[1];useEffect(function(){fetch(\"/videos\").then(function(response){return response.json();}).then(function(updatedData){setVideoData(updatedData);}).catch(function(error){console.error(\"Error fetching data:\",error);});},[]);var sortVideoData=function sortVideoData(){var sortedData=_toConsumableArray(videoData);if(sortOrder===\"ascending\"){sortedData.sort(function(a,b){return a.rating-b.rating;});}else{sortedData.sort(function(a,b){return b.rating-a.rating;});}return sortedData;};var handleLike=function handleLike(videoId){var updatedVideos=videoData.map(function(video){if(video.id===videoId){return _objectSpread(_objectSpread({},video),{},{rating:video.rating+1});}return video;});setVideoData(updatedVideos);fetch(\"/videos/\".concat(videoId,\"/like\"),{method:\"POST\"});};var handleDislike=function handleDislike(videoId){var updatedVideos=videoData.map(function(video){if(video.id===videoId){return _objectSpread(_objectSpread({},video),{},{rating:Math.max(video.rating-1,0)});}return video;});setVideoData(updatedVideos);fetch(\"/videos/\".concat(videoId,\"/dislike\"),{method:\"POST\"});};var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/videos/\".concat(id),{method:\"DELETE\"});case 3:response=_context.sent;if(response.ok){setVideoData(function(videoData){return videoData.filter(function(element){return element.id!==id;});});}else{console.error(\"Error deleting video:\");}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error deleting video:\",_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function handleDelete(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(VideoComponent,{elements:sortVideoData(),sortOrder:sortOrder,setOrder:setSortOrder,onLike:handleLike,onDislike:handleDislike,onDelete:handleDelete});}","map":{"version":3,"sources":["/home/mele/CodeYourFuture/Directory/htmlcssweek4/Full-Stack-Project-Assessment/client/src/AllVideoDisplay.js"],"names":["React","useEffect","useState","VideoComponent","elements","onLike","onDislike","onDelete","setOrder","sortOrder","VideoDisplay","map","element","title","url","id","rating","AllVideoDisplay","videoData","setVideoData","setSortOrder","fetch","then","response","json","updatedData","catch","error","console","sortVideoData","sortedData","sort","a","b","handleLike","videoId","updatedVideos","video","method","handleDislike","Math","max","handleDelete","ok","filter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\n\nfunction VideoComponent({\n  elements,\n  onLike,\n  onDislike,\n  onDelete,\n  setOrder,\n  sortOrder,\n}) {\n  return (\n    <div>\n      <div id=\"ascendingButton\">\n        <button\n          className={`btn btn-light customBackground1 ${\n            sortOrder === \"ascending\" ? \"active\" : \"\"\n          }`}\n          onClick={() => setOrder(\"ascending\")}\n        >\n          Ascending\n        </button>\n        <button\n          className={`btn btn-light customBackground1 ${\n            sortOrder === \"descending\" ? \"active\" : \"\"\n          }`}\n          onClick={() => setOrder(\"descending\")}\n        >\n          Descending\n        </button>\n      </div>\n\n      \n      \n      <div class=\"container\">\n        <div class=\"videoDisplayContainer\">\n          <VideoDisplay\n            elements={elements}\n            onLike={onLike}\n            onDislike={onDislike}\n            onDelete={onDelete}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction VideoDisplay({ elements, onLike, onDislike, onDelete }) {\n  return (\n    <div class=\"videoDisplayContainer\">\n      {\" \"}\n      {elements.map((element) => (\n        <div key={element.id} class=\"displayGrid\">\n          <h5>{element.title}</h5>\n\n          <source\n            width=\"330\"\n            height=\"200\"\n            src={element.url}\n            title={element.title}\n            border=\"none\"\n            border-radius=\"103px\"\n            frameborder=\"0\"\n            allowfullscreen\n            align=\"center\"\n          ></source>\n          <div class=\"likedislikeBtn\">\n            <button\n              class=\"btn btn-light customBackground5\"\n              onClick={() => onLike(element.id)}\n            >\n              Like\n            </button>\n            <span>Votes:&nbsp;{element.rating}</span>\n\n            <button\n              class=\"btn btn-light customBackground5\"\n              onClick={() => onDislike(element.id)}\n            >\n              Dislike\n            </button>\n          </div>\n          <button\n            class=\"btn btn-light deleteBtn\"\n            onClick={() => onDelete(element.id)}\n          >\n            Delete\n          </button>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default function AllVideoDisplay() {\n  const [videoData, setVideoData] = useState([]);\n  const [sortOrder, setSortOrder] = useState(\"descending\");\n\n  useEffect(() => {\n    fetch(\"/videos\")\n      .then((response) => response.json())\n      .then((updatedData) => {\n        setVideoData(updatedData);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data:\", error);\n      });\n  }, []);\n  const sortVideoData = () => {\n    const sortedData = [...videoData];\n\n    if (sortOrder === \"ascending\") {\n      sortedData.sort((a, b) => a.rating - b.rating);\n    } else {\n      sortedData.sort((a, b) => b.rating - a.rating);\n    }\n\n    return sortedData;\n  };\n\n  const handleLike = (videoId) => {\n    const updatedVideos = videoData.map((video) => {\n      if (video.id === videoId) {\n        return { ...video, rating: video.rating + 1 };\n      }\n      return video;\n    });\n    setVideoData(updatedVideos);\n\n    fetch(`/videos/${videoId}/like`, { method: \"POST\" });\n  };\n\n  const handleDislike = (videoId) => {\n    const updatedVideos = videoData.map((video) => {\n      if (video.id === videoId) {\n        return { ...video, rating: Math.max(video.rating - 1, 0) };\n      }\n      return video;\n    });\n    setVideoData(updatedVideos);\n\n    fetch(`/videos/${videoId}/dislike`, { method: \"POST\" });\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      const response = await fetch(`/videos/${id}`, { method: \"DELETE\" });\n      if (response.ok) {\n        setVideoData((videoData) =>\n          videoData.filter((element) => element.id !== id)\n        );\n      } else {\n        console.error(\"Error deleting video:\");\n      }\n    } catch (error) {\n      console.error(\"Error deleting video:\", error);\n    }\n  };\n\n  return (\n    <VideoComponent\n      elements={sortVideoData()}\n      sortOrder={sortOrder}\n      setOrder={setSortOrder}\n      onLike={handleLike}\n      onDislike={handleDislike}\n      onDelete={handleDelete}\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}