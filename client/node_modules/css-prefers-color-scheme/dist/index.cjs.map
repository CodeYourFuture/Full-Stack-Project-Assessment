{"version":3,"file":"index.cjs","sources":["../src/index.js"],"sourcesContent":["const mediaRegExp = /^media$/i;\nconst prefersInterfaceRegExp = /\\(\\s*prefers-color-scheme\\s*:\\s*(dark|light|no-preference)\\s*\\)/i;\nconst colorIndexByStyle = { dark: 48, light: 70, 'no-preference': 22 };\nconst prefersInterfaceColorIndexReplacer = ($0, style) => `(color-index: ${colorIndexByStyle[style.toLowerCase()]})`;\n\n\nconst colorDepthByStyle = { dark: 48842621, light: 70318723, 'no-preference': 22511989 };\nconst prefersInterfaceColorDepthReplacer = ($0, style) => `(color: ${colorDepthByStyle[style.toLowerCase()]})`;\n\nconst creator = opts => {\n\tconst preserve = 'preserve' in Object(opts) ? opts.preserve : true;\n\tconst mediaQueries = {};\n\tif (\n\t\t'mediaQuery' in Object(opts) &&\n\t\t(opts.mediaQuery === 'color-index' || opts.mediaQuery === 'color')\n\t) {\n\t\tmediaQueries[opts.mediaQuery] = true;\n\t} else {\n\t\tmediaQueries['color-index'] = true;\n\t\tmediaQueries['color'] = true;\n\t}\n\n\treturn {\n\t\tpostcssPlugin: 'postcss-prefers-color-scheme',\n\t\tAtRule: (atRule) => {\n\t\t\tif (!mediaRegExp.test(atRule.name)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { params } = atRule;\n\t\t\tconst altParamsColorIndex = params.replace(prefersInterfaceRegExp, prefersInterfaceColorIndexReplacer);\n\t\t\tconst altParamsColorDepth = params.replace(prefersInterfaceRegExp, prefersInterfaceColorDepthReplacer);\n\n\t\t\tif (params !== altParamsColorIndex && mediaQueries['color-index']) {\n\t\t\t\tatRule.cloneBefore({ params: altParamsColorIndex });\n\t\t\t}\n\n\t\t\tif (params !== altParamsColorDepth && mediaQueries['color']) {\n\t\t\t\tatRule.cloneBefore({ params: altParamsColorDepth });\n\t\t\t}\n\n\t\t\tif (!preserve) {\n\t\t\t\tatRule.remove();\n\t\t\t}\n\t\t},\n\t};\n};\n\ncreator.postcss = true;\n\nexport default creator;\n"],"names":["mediaRegExp","prefersInterfaceRegExp","colorIndexByStyle","dark","light","prefersInterfaceColorIndexReplacer","$0","style","toLowerCase","colorDepthByStyle","prefersInterfaceColorDepthReplacer","creator","opts","preserve","Object","mediaQueries","mediaQuery","postcssPlugin","AtRule","atRule","test","name","params","altParamsColorIndex","replace","altParamsColorDepth","cloneBefore","remove","postcss"],"mappings":"aAAA,MAAMA,EAAc,WACdC,EAAyB,mEACzBC,EAAoB,CAAEC,KAAM,GAAIC,MAAO,mBAAqB,IAC5DC,EAAqC,CAACC,EAAIC,IAAW,iBAAgBL,EAAkBK,EAAMC,kBAG7FC,EAAoB,CAAEN,KAAM,SAAUC,MAAO,yBAA2B,UACxEM,EAAqC,CAACJ,EAAIC,IAAW,WAAUE,EAAkBF,EAAMC,kBAEvFG,EAAUC,UACTC,IAAW,aAAcC,OAAOF,KAAQA,EAAKC,SAC7CE,EAAe,WAEpB,eAAgBD,OAAOF,KACF,gBAApBA,EAAKI,YAAoD,UAApBJ,EAAKI,YAI3CD,EAAa,gBAAiB,EAC9BA,EAAY,OAAY,GAHxBA,EAAaH,EAAKI,aAAc,EAM1B,CACNC,cAAe,+BACfC,OAASC,QACHnB,EAAYoB,KAAKD,EAAOE,mBAIvBC,OAAEA,GAAWH,EACbI,EAAsBD,EAAOE,QAAQvB,EAAwBI,GAC7DoB,EAAsBH,EAAOE,QAAQvB,EAAwBS,GAE/DY,IAAWC,GAAuBR,EAAa,gBAClDI,EAAOO,YAAY,CAAEJ,OAAQC,IAG1BD,IAAWG,GAAuBV,EAAY,OACjDI,EAAOO,YAAY,CAAEJ,OAAQG,IAGzBZ,GACJM,EAAOQ,YAMXhB,EAAQiB,SAAU"}